{"is_source_file": true, "format": "Python", "description": "This is a FastAPI application source file that defines the backend API for a recipe explorer web app. It includes endpoints for health checks, listing categories and recipes, retrieving recipe details, and managing user favorites. It also sets up CORS middleware and initializes database tables at startup.", "external_files": ["src.db", "src.models", "src.schemas", "src.seed"], "external_methods": ["get_db_session", "seed_if_empty"], "published": ["app"], "classes": [{"name": "FastAPI", "description": "Main application object from FastAPI framework."}], "methods": [{"name": "health_check()", "description": "Health check endpoint that returns a simple status indicating the service is running.", "scope": "", "scopeKind": ""}, {"name": "List[CategoryOut] list_categories(db: Session = Depends(_db_dep))", "description": "Returns all recipe categories from the database.", "scope": "", "scopeKind": ""}, {"name": "List[RecipeListOut] list_recipes( category_id: Optional[int] = Query(None, description=\"Filter recipes by category_id\"), q: Optional[str] = Query(None, description=\"Search by title/ingredients substring\"), db: Session = Depends(_db_dep), )", "description": "Returns a list of recipes, optionally filtered by category or search query.", "scope": "", "scopeKind": ""}, {"name": "RecipeDetailOut get_recipe(recipe_id: int, db: Session = Depends(_db_dep))", "description": "Retrieves detailed information for a specific recipe by ID.", "scope": "", "scopeKind": ""}, {"name": "FavoriteOut add_favorite(payload: FavoriteCreateIn, db: Session = Depends(_db_dep))", "description": "Adds a recipe to a user's favorites list.", "scope": "", "scopeKind": ""}, {"name": "List[FavoriteOut] list_favorites( user_id: int = Query(..., description=\"User ID to list favorites for (demo user_id=1)\"), db: Session = Depends(_db_dep), )", "description": "Lists all favorite recipes for a specified user.", "scope": "", "scopeKind": ""}, {"name": "_db_dep()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str _ingredients_text(recipe: Recipe)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None _on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool _recipe_matches_q(recipe: Recipe, q: str)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["select(Category)", "select(Recipe)", "select(Favorite)", "get_db_session()", "seed_if_empty()", "db.execute()", "db.get()", "db.add()", "db.commit()", "db.refresh()", "db.rollback()"], "search-terms": ["FastAPI", "recipe endpoints", "categories", "favorites", "database session", "seed data", "health check", "recipe details"], "state": 2, "file_id": 3, "knowledge_revision": 18, "git_revision": "cb5045ccf90cdb7d0f26f52da450c87fd636bb6b", "revision_history": [{"8": "cb5045ccf90cdb7d0f26f52da450c87fd636bb6b"}, {"18": "cb5045ccf90cdb7d0f26f52da450c87fd636bb6b"}], "ctags": [{"_type": "tag", "name": "_db_dep", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def _db_dep():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_ingredients_text", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def _ingredients_text(recipe: Recipe) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(recipe: Recipe)"}, {"_type": "tag", "name": "_on_startup", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def _on_startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_recipe_matches_q", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def _recipe_matches_q(recipe: Recipe, q: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(recipe: Recipe, q: str)"}, {"_type": "tag", "name": "add_favorite", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def add_favorite(payload: FavoriteCreateIn, db: Session = Depends(_db_dep)) -> FavoriteOut:$/", "language": "Python", "typeref": "typename:FavoriteOut", "kind": "function", "signature": "(payload: FavoriteCreateIn, db: Session = Depends(_db_dep))"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def get_recipe(recipe_id: int, db: Session = Depends(_db_dep)) -> RecipeDetailOut:$/", "language": "Python", "typeref": "typename:RecipeDetailOut", "kind": "function", "signature": "(recipe_id: int, db: Session = Depends(_db_dep))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_categories", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def list_categories(db: Session = Depends(_db_dep)) -> List[CategoryOut]:$/", "language": "Python", "typeref": "typename:List[CategoryOut]", "kind": "function", "signature": "(db: Session = Depends(_db_dep))"}, {"_type": "tag", "name": "list_favorites", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def list_favorites($/", "language": "Python", "typeref": "typename:List[FavoriteOut]", "kind": "function", "signature": "( user_id: int = Query(..., description=\"User ID to list favorites for (demo user_id=1)\"), db: Session = Depends(_db_dep), )"}, {"_type": "tag", "name": "list_recipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^def list_recipes($/", "language": "Python", "typeref": "typename:List[RecipeListOut]", "kind": "function", "signature": "( category_id: Optional[int] = Query(None, description=\"Filter recipes by category_id\"), q: Optional[str] = Query(None, description=\"Search by title/ingredients substring\"), db: Session = Depends(_db_dep), )"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/recipe-explorer-219505-219515/recipe_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}], "hash": "9792d38b53cdb0c5325d728065558d17", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}]}